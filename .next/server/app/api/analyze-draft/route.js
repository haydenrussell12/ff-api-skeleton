"use strict";(()=>{var e={};e.id=47,e.ids=[47],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},260:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>y,patchFetch:()=>P,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>D,staticGenerationAsyncStorage:()=>m});var r={};o.r(r),o.d(r,{GET:()=>f,POST:()=>u,runtime:()=>p});var a=o(9303),s=o(8716),l=o(670),n=o(7070);class i{getRosterRequirements(e="standard"){let t={standard:{QB:1,RB:2,WR:2,TE:1,FLEX:1,K:1,DEF:1,totalStarters:9,flexPositions:["RB","WR","TE"]},superflex:{QB:1,RB:2,WR:2,TE:1,FLEX:1,SUPERFLEX:1,K:1,DEF:1,totalStarters:10,flexPositions:["RB","WR","TE"],superflexPositions:["QB","RB","WR","TE"]},"2qb":{QB:2,RB:2,WR:2,TE:1,FLEX:1,K:1,DEF:1,totalStarters:10,flexPositions:["RB","WR","TE"]}};return t[e]||t.standard}calculateOptimalLineup(e,t={}){let o=t.leagueType||"standard",r=this.getRosterRequirements(o),a=this.groupPlayersByPosition(e),s={},l=new Set;if(Object.entries(r).forEach(([e,t])=>{if("totalStarters"!==e&&"flexPositions"!==e&&"superflexPositions"!==e&&"number"==typeof t&&t>0){s[e]=[];let o=(a[e]||[]).filter(e=>!l.has(e.playerId||e.playerName)).sort((e,t)=>(t.projectedPoints||0)-(e.projectedPoints||0)).slice(0,t);s[e]=o,o.forEach(e=>l.add(e.playerId||e.playerName))}}),r.flexPositions){let e=r.flexPositions.flatMap(e=>(a[e]||[]).filter(e=>!l.has(e.playerId||e.playerName)));if(e.length>0){let t=e.sort((e,t)=>(t.projectedPoints||0)-(e.projectedPoints||0))[0];t&&(s.FLEX=[t],l.add(t.playerId||t.playerName))}}if("superflex"===o&&"superflexPositions"in r&&r.superflexPositions){let e=(a.QB||[]).filter(e=>!l.has(e.playerId||e.playerName)),t=(a.RB||[]).filter(e=>!l.has(e.playerId||e.playerName)),o=(a.WR||[]).filter(e=>!l.has(e.playerId||e.playerName)),r=(a.TE||[]).filter(e=>!l.has(e.playerId||e.playerName)),n=null;if(e.length>0){let t=e.sort((e,t)=>(t.projectedPoints||0)-(e.projectedPoints||0))[0];n=t,console.log(`ðŸ¦¸ SUPERFLEX: Selected QB ${t.playerName} with ${t.projectedPoints} points`)}if(!n){let e=[...t,...o,...r];e.length>0&&(n=e.sort((e,t)=>(t.projectedPoints||0)-(e.projectedPoints||0))[0],console.log(`ðŸ¦¸ SUPERFLEX: No QBs available, selected ${n.position} ${n.playerName} with ${n.projectedPoints} points`))}n&&(s.SUPERFLEX=[n],l.add(n.playerId||n.playerName))}return s}groupPlayersByPosition(e){let t={};return e.forEach(e=>{let o=(e.position||"").toUpperCase();o&&(t[o]||(t[o]=[]),t[o].push(e))}),t}getBenchPlayers(e,t){let o=new Set;return Object.values(t).forEach(e=>{Array.isArray(e)&&e.forEach(e=>{o.add(e.playerId||e.playerName)})}),e.filter(e=>!o.has(e.playerId||e.playerName))}calculateTotalProjectedPoints(e){if(Array.isArray(e))return e.reduce((e,t)=>e+(t.projectedPoints||0),0);let t=0;return Object.values(e).forEach(e=>{Array.isArray(e)&&(t+=e.reduce((e,t)=>e+(t.projectedPoints||0),0))}),t}analyzeLineup(e,t={}){let o=t.leagueType||"standard",r=this.getRosterRequirements(o);return{totalStarters:r.totalStarters,leagueType:o,requirements:r,positionCounts:Object.entries(r).filter(([e])=>!["totalStarters","flexPositions","superflexPositions"].includes(e)).reduce((e,[t,o])=>({...e,[t]:o}),{})}}}class c{constructor(e=[]){this.vorpLookup={},this.leagueAverages={},this.leagueStdDevs={},e.forEach(e=>{let t=(e.playerName||"").toLowerCase(),o=e.vorpScore??e.vorp_score??0;t&&(this.vorpLookup[t]=Number(o))})}calculatePositionGrades(e,t={}){let o=t.leagueType||"standard",r=this.getPositionRequirements(o),a=[...e.map(e=>{let t=this.calculateTeamPositionGrades(e,r);return{...e,positionGrades:t}}).map(e=>{let t=e.optimalLineupPoints||0;return{...e,overallScore:t}})].sort((e,t)=>t.overallScore-e.overallScore);return a.map((e,t)=>{let o=(1-t/a.length)*100,r=this.percentileToGrade(o);return{...e,overallGrade:{grade:r,score:e.overallScore,percentile:Math.round(o)}}})}calculateTeamPositionGrades(e,t){let o={};return t.forEach(t=>{if("FLEX"===t||"SUPERFLEX"===t){let r=this.getFlexPlayers(e,t);if(r.length>0){let e=this.gradePositionSimple(r,t);o[t]=e}}else{let r=this.getPositionPlayers(e,t);if(r.length>0){let e=this.gradePositionSimple(r,t);o[t]=e}}}),o}gradePositionSimple(e,t){if(0===e.length)return{grade:"â€”",score:0,reason:"No players"};let o=e.reduce((e,t)=>e+(t.projectedPoints||0),0),r="C",a={QB:{excellent:25,good:22,average:18,poor:15},RB:{excellent:40,good:30,average:22,poor:15},WR:{excellent:40,good:30,average:22,poor:15},TE:{excellent:15,good:12,average:9,poor:6},FLEX:{excellent:20,good:15,average:12,poor:8},SUPERFLEX:{excellent:25,good:20,average:15,poor:10},K:{excellent:10,good:8,average:6,poor:4},DEF:{excellent:12,good:9,average:7,poor:5}},s=a[t]||a.FLEX;return{grade:r=o>=s.excellent?"A+":o>=s.good?"A":o>=s.average?"B":o>=s.poor?"C":"D",score:o,reason:this.generatePositionReason(r,0,t)}}getFlexPlayers(e,t){let o=[];return("SUPERFLEX"===t?["QB","RB","WR","TE"]:["RB","WR","TE"]).forEach(t=>{let r=this.getPositionPlayers(e,t);o.push(...r)}),o.sort((e,t)=>(t.projectedPoints||0)-(e.projectedPoints||0)).slice(0,3)}getPositionPlayers(e,t){return e.optimalLineup&&e.optimalLineup[t]&&e.optimalLineup[t]||[]}gradePosition(e,t){if(0===e.length)return{grade:"â€”",score:0,reason:"No players"};let o=e.reduce((e,t)=>e+(t.projectedPoints||0),0),r=e.reduce((e,t)=>e+(t.vorpScore||0),0)/e.length,a=this.leagueAverages[t]||0,s=this.leagueStdDevs[t]||1,l=s>0?(o-a)/s:0,n=this.zScoreToGrade(l);return{grade:n,score:o,zScore:l,avgVorp:r,reason:this.generatePositionReason(n,l,t)}}calculateOverallGrade(e,t){let o={QB:1.2,RB:1,WR:1,TE:.9,FLEX:.8,SUPERFLEX:1.1,K:.3,DEF:.4},r=0,a=0;if(Object.entries(t).forEach(([e,t])=>{if(t&&"â€”"!==t.grade){let s=o[e]||1,l=this.gradeToScore(t.grade);r+=l*s,a+=s}}),0===a)return{grade:"â€”",score:0};let s=r/a;return{grade:this.scoreToGrade(s),score:s,totalWeightedScore:r,totalWeight:a}}zScoreToGrade(e){return e>=1.5?"A+":e>=1?"A":e>=.5?"B+":e>=0?"B":e>=-.5?"C+":e>=-1?"C":e>=-1.5?"D+":e>=-2?"D":"F"}gradeToScore(e){return({"A+":95,A:90,"A-":85,"B+":80,B:75,"B-":70,"C+":65,C:60,"C-":55,"D+":50,D:45,"D-":40,F:30})[e]||50}scoreToGrade(e){return e>=90?"A+":e>=85?"A":e>=80?"A-":e>=75?"B+":e>=70?"B":e>=65?"B-":e>=60?"C+":e>=55?"C":e>=50?"C-":e>=45?"D+":e>=40?"D":e>=35?"D-":"F"}generatePositionReason(e,t,o){return e.startsWith("A")?`Excellent ${o} performance`:e.startsWith("B")?`Good ${o} performance`:e.startsWith("C")?`Average ${o} performance`:e.startsWith("D")?`Below average ${o} performance`:`Poor ${o} performance`}calculateLeagueStats(e,t){let o={};t.forEach(e=>{o[e]={points:[],vorp:[]}}),e.forEach(e=>{(e.roster||[]).forEach(e=>{let t=(e.position||"").toUpperCase();if(!t||!o[t])return;let r=e.projectedPoints||0,a=this.getPlayerVorp(e.playerName||e.name||"");o[t].points.push(r),o[t].vorp.push(a)})}),Object.keys(o).forEach(e=>{let t=o[e].points.filter(e=>e>0),r=o[e].vorp.filter(e=>0!==e);t.length>0&&(this.leagueAverages[e]=t.reduce((e,t)=>e+t,0)/t.length,this.leagueStdDevs[e]=this.calculateStdDev(t,this.leagueAverages[e])),r.length>0&&(this.leagueAverages[`${e}_VORP`]=r.reduce((e,t)=>e+t,0)/r.length,this.leagueStdDevs[`${e}_VORP`]=this.calculateStdDev(r,this.leagueAverages[`${e}_VORP`]))})}calculateStdDev(e,t){return e.length<=1?0:Math.sqrt(e.reduce((e,o)=>e+Math.pow(o-t,2),0)/e.length)}getPlayerVorp(e){if(!e)return 0;let t=e.toLowerCase();return this.vorpLookup[t]||0}getPositionRequirements(e="standard"){let t={standard:["QB","RB","WR","TE","FLEX","K","DEF"],superflex:["QB","RB","WR","TE","FLEX","SUPERFLEX","K","DEF"],"2qb":["QB","RB","WR","TE","FLEX","K","DEF"]};return t[e]||t.standard}percentileToGrade(e){return e>=90?"A+":e>=80?"A":e>=70?"A-":e>=60?"B+":e>=50?"B":e>=40?"B-":e>=30?"C+":e>=20?"C":e>=10?"C-":e>=5?"D+":"D"}}let p="nodejs";class d{async initialize(){try{console.log("\uD83D\uDE80 Initializing Draft Analyzer...");let[e,t,r,a]=await Promise.all([o.e(297).then(o.t.bind(o,9297,19)),o.e(266).then(o.t.bind(o,1266,19)),o.e(101).then(o.t.bind(o,101,19)),o.e(865).then(o.t.bind(o,5865,19))]);console.log("\uD83D\uDD0D Loaded modules:",{masterPlayers:!!e,nameLookup:!!t,vorpData:!!r,adpData:!!a});let s=e.default.players;console.log("\uD83D\uDD0D Master players structure:",{hasDefault:!!e.default,hasPlayers:!!s,playerCount:s?.length||0,samplePlayer:s?.[0]}),this.consolidatedData={},s.forEach(e=>{e.full_name&&(this.consolidatedData[e.full_name.toLowerCase()]=e,e.player_id&&(this.consolidatedData[e.player_id.toLowerCase()]=e))}),this.nameLookupIndex=t.default,this.vorpData=r.default.vorpScores||r.default,this.adpData={};let l=a.default.players||[];console.log("\uD83D\uDD0D ADP data structure:",{hasDefault:!!a.default,hasPlayers:!!l,playerCount:l?.length||0,samplePlayer:l?.[0]}),l.forEach(e=>{e.full_name&&(this.adpData[e.full_name.toLowerCase()]=e)}),console.log(`âœ… Draft Analyzer initialized with ${Object.keys(this.consolidatedData).length} players and ${Object.keys(this.adpData).length} ADP records.`),console.log(`ðŸ” Sample consolidated players:`,Object.keys(this.consolidatedData).slice(0,5)),console.log(`ðŸ” Sample ADP players:`,Object.keys(this.adpData).slice(0,5))}catch(e){throw console.error("âŒ Failed to initialize Draft Analyzer:",e),Error("Failed to load necessary data for analysis.")}}async fetchSleeperApi(e){let t=await fetch(e);if(!t.ok)throw Error(`Failed to fetch from Sleeper API: ${t.statusText}`);return t.json()}parseSleeperDraftUrl(e){let t=e.match(/sleeper\.(?:com|app)\/draft\/nfl\/([a-zA-Z0-9]+)/);if(!t||!t[1])throw Error("Invalid Sleeper mock draft URL format. Expected format: https://sleeper.app/draft/nfl/{draft_id}");return t[1]}normalizePlayerName(e){return e?e.toLowerCase().replace(/\s+(jr\.?|sr\.?|ii|iii|iv|v|vi|vii|viii|ix|x)\s*$/i,"").replace(/\s+/g," ").trim():""}findPlayerByName(e,t){if(!e)return null;let o=this.normalizePlayerName(e);console.log(`ðŸ” Looking for player: "${e}" -> normalized: "${o}"`);let r=this.consolidatedData[o];if(r)return console.log(`âœ… Found exact match: ${e}`),r;if(r=this.consolidatedData[e.toLowerCase()])return console.log(`âœ… Found exact match with original name: ${e}`),r;let a=o.split(" ");if(a.length>=2){let t=a[0],o=a[a.length-1];for(let[r,a]of(console.log(`ðŸ” Trying fuzzy match: firstName="${t}", lastName="${o}"`),Object.entries(this.consolidatedData))){let s=r.split(" ");if(s.length>=2){let l=s[0],n=s[s.length-1];if(l===t&&n===o)return console.log(`âœ… Found fuzzy match: "${e}" -> "${r}"`),a}}}for(let[t,r]of Object.entries(this.consolidatedData))if(t.includes(o)||o.includes(t))return console.log(`âœ… Found partial match: "${e}" -> "${t}"`),r;return console.log(`âŒ No match found for: ${e}`),console.log(`ðŸ” Available players starting with similar names:`,Object.keys(this.consolidatedData).filter(e=>e.includes(o.split(" ")[0])).slice(0,5)),null}getPlayerProjectedPoints(e,t){let o=this.findPlayerByName(e,t);if(!o||!o.projections)return console.log(`âš ï¸ No player or projections found for: ${e} (${t})`),0;let r=t?.toLowerCase();console.log(`ðŸ” Looking for projections for ${e} at position: ${r}`),console.log(`ðŸ” Available projection keys:`,Object.keys(o.projections));let a=0;if("def"===r||"defense"===r){for(let t of(console.log(`ðŸ›¡ï¸ Processing DEFENSE player: ${e}`),["def","DEF","defense","Defense","DEFENSE"]))if(o.projections[t]?.fpts){a=o.projections[t].fpts,console.log(`âœ… Found defense projections using key: ${t} = ${a}`);break}if(!a){for(let e of Object.keys(o.projections))if(e.toLowerCase().includes("def")){a=o.projections[e].fpts,console.log(`âœ… Found defense projections using partial key: ${e} = ${a}`);break}}if(!a)for(let e of Object.keys(o.projections)){let t=o.projections[e];if(t&&"object"==typeof t&&t.fpts){a=t.fpts,console.log(`âœ… Found defense projections using generic key: ${e} = ${a}`);break}}if(!a)for(let e of Object.keys(o.projections)){let t=o.projections[e];if("number"==typeof t&&t>0){a=t,console.log(`âœ… Found defense projections using numeric key: ${e} = ${a}`);break}}!a&&"number"==typeof o.projections&&o.projections>0&&(a=o.projections,console.log(`âœ… Found defense projections as direct number: ${a}`))}else a=o.projections[r]?.fpts;return a?(console.log(`âœ… Projected points for ${e}: ${a}`),"number"==typeof a?a:parseFloat(a)):(console.log(`âŒ No projected points found for ${e} at position ${r}`),console.log(`ðŸ” Player projections structure:`,o.projections),0)}getPlayerAdp(e){if(!this.findPlayerByName(e,""))return 0;let t=this.normalizePlayerName(e),o=this.adpData[t];if(!o){let e=t.split(" ");if(e.length>=2){let t=e[0],r=e[e.length-1];for(let[e,a]of Object.entries(this.adpData)){let s=e.split(" ");if(s.length>=2){let e=s[0],l=s[s.length-1];if(e===t&&l===r){o=a;break}}}}}let r=o?.adp_value;return r?parseFloat(r):0}getPlayerVorp(e){let t=this.normalizePlayerName(e);if(!t)return 0;let o=Array.isArray(this.vorpData)?this.vorpData.find(e=>this.normalizePlayerName(e.playerName||"")===t):void 0;return o?.vorp_score||o?.vorpScore?parseFloat(o.vorp_score||o.vorpScore):0}async analyzeDraft(e,t="standard"){await this.initialize();let o=this.parseSleeperDraftUrl(e);console.log(`Analyzing draft ID: ${o}`);let r=await this.fetchSleeperApi(`https://api.sleeper.app/v1/draft/${o}`),a=await this.fetchSleeperApi(`https://api.sleeper.app/v1/draft/${o}/picks`);console.log("\uD83D\uDD0D Draft data:",{id:r.id,type:r.type,status:r.status,metadata:r.metadata,settings:r.settings,league_id:r.league_id,slot_to_roster_id:r.slot_to_roster_id});let s={},l=r.slot_to_roster_id;if(!l)throw Error("No slot_to_roster_id found in draft data - this may not be a mock draft");if(console.log("\uD83E\uDDE0 Using smart username detection..."),console.log("\uD83D\uDD0D Draft type:",r.type),console.log("\uD83D\uDD0D Draft status:",r.status),console.log("\uD83D\uDD0D Draft metadata keys:",Object.keys(r.metadata||{})),console.log("\uD83D\uDD0D Draft settings keys:",Object.keys(r.settings||{})),"mock"===r.type||"complete"===r.status){for(let e of(console.log("\uD83D\uDD0D This appears to be a mock draft, extracting usernames from picks..."),a||[]))if(e.metadata&&Object.keys(e.metadata).length>0){let t=String(e.draft_slot);console.log(`ðŸ” Pick ${e.draft_slot} metadata:`,e.metadata);let o=e.metadata.user_id||e.metadata.username||e.metadata.display_name||e.metadata.name||e.metadata.user;o&&!s[t]&&(s[t]=o,console.log(`âœ… Found username for slot ${t}: ${o}`))}}if(0===Object.keys(s).length&&r.metadata?.draft_order){console.log("\uD83D\uDD0D Checking draft metadata for user order...");let e=r.metadata.draft_order;console.log("\uD83D\uDD0D Draft order from metadata:",e),Array.isArray(e)&&e.forEach((e,t)=>{if(e&&"string"==typeof e&&e.trim()){let o=String(t);s[o]=e.trim(),console.log(`âœ… Metadata mapped slot ${o} to: ${e.trim()}`)}})}if(0===Object.keys(s).length&&r.metadata?.team_names){console.log("\uD83D\uDD0D Checking for team names in metadata...");let e=r.metadata.team_names;console.log("\uD83D\uDD0D Team names from metadata:",e),Array.isArray(e)&&e.forEach((e,t)=>{if(e&&"string"==typeof e&&e.trim()){let o=String(t);s[o]=e.trim(),console.log(`âœ… Team names mapped slot ${o} to: ${e.trim()}`)}})}if(0===Object.keys(s).length&&r.settings)for(let e of(console.log("\uD83D\uDD0D Checking draft settings for user info..."),Object.keys(r.settings))){let t=r.settings[e];if(Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&(console.log(`ðŸ” Found potential user array in settings.${e}:`,t),t.length===Object.keys(l).length)){t.forEach((e,t)=>{if(e&&"string"==typeof e&&e.trim()){let o=String(t);s[o]=e.trim(),console.log(`âœ… Settings mapped slot ${o} to: ${e.trim()}`)}});break}}if(0===Object.keys(s).length&&r.metadata){for(let[e,t]of(console.log("\uD83D\uDD0D Checking all metadata fields for potential usernames..."),Object.entries(r.metadata)))if(Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&(console.log(`ðŸ” Found array in metadata.${e}:`,t),t.length===Object.keys(l).length&&t.every(e=>"string"==typeof e&&e.trim().length>0&&(e.includes("@")||e.length>3)))){t.forEach((t,o)=>{let r=String(o);s[r]=t.trim(),console.log(`âœ… Metadata.${e} mapped slot ${r} to: ${t.trim()}`)});break}}if(0===Object.keys(s).length)for(let e of(console.log("\uD83D\uDD0D Checking for any other potential username sources..."),Object.keys(r))){let t=r[e];if(Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&(console.log(`ðŸ” Found array in draft.${e}:`,t),t.length===Object.keys(l).length)){t.forEach((t,o)=>{if(t&&"string"==typeof t&&t.trim()){let r=String(o);s[r]=t.trim(),console.log(`âœ… Draft.${e} mapped slot ${r} to: ${t.trim()}`)}});break}}0===Object.keys(s).length&&(console.log("\uD83D\uDD0D No usernames found, generating mock usernames..."),Object.keys(l).forEach(e=>{let t=parseInt(e,10);s[e]=`DraftSlot${t+1}`,console.log(`ðŸŽ­ Generated mock username for slot ${e}: DraftSlot${t+1}`)})),console.log("\uD83D\uDD0D Final slot to name mapping:",s),console.log("\uD83D\uDD0D Slot to roster mapping:",l),console.log("\uD83D\uDCCA USERNAME DETECTION SUMMARY:"),console.log(`   Total slots: ${Object.keys(l).length}`),console.log(`   Slots with names: ${Object.keys(s).length}`),console.log(`   Slots without names: ${Object.keys(l).length-Object.keys(s).length}`),0===Object.keys(s).length?(console.log("âŒ NO USERNAMES FOUND - All strategies failed"),console.log("\uD83D\uDD0D This suggests this may be a mock draft without user information")):(console.log("âœ… Usernames found:"),Object.entries(s).forEach(([e,t])=>{console.log(`   Slot ${e}: ${t}`)}));let n=await this.fetchSleeperApi("https://api.sleeper.app/v1/players/nfl"),p=e=>n?.[e],d={name:r.metadata?.name||`Draft ${o}`,teams:Object.keys(l).length,rounds:r.settings?.rounds||0,totalPicks:a?.length||0},u={};for(let e of(Object.entries(l).forEach(([e,t])=>{let o=s[String(e)]||`Team ${t}`;u[t]={teamId:t,teamName:o,draftSlot:parseInt(e,10),roster:[]},console.log(`ðŸˆ Created team ${t} for slot ${e} with name: "${o}"`)}),a||[])){let t=p(String(e.player_id));if(!t)continue;let o=t.full_name||`${t.first_name||""} ${t.last_name||""}`.trim(),r=t.position||e.metadata?.position||"";(r?.toLowerCase()==="def"||r?.toLowerCase()==="defense")&&console.log(`ðŸ›¡ï¸ Processing DEFENSE player: ${o} at position: ${r}`);let a=this.getPlayerProjectedPoints(o,r),s=this.getPlayerAdp(o),n=this.getPlayerVorp(o),i=s>0?s-e.draft_slot:0,c={...e,metadata:t,playerName:o,position:r,projectedPoints:a,adpValue:s,vorpScore:n,draftValue:i,playerId:e.player_id},d=l[String(e.draft_slot)];d&&u[d]&&u[d].roster.push(c)}let f=new i,g=new c(Array.isArray(this.vorpData)?this.vorpData:[]),h=Object.entries(u).map(([e,o])=>{let r=f.calculateOptimalLineup(o.roster,{leagueType:t,scoring:"ppr"}),a=o.roster.map(e=>e.adpValue||0).filter(e=>0!==e),s=a.length>0?a.reduce((e,t)=>e+t,0)/a.length:0,l=o.roster.map(e=>e.vorpScore||0).filter(e=>0!==e),n=l.length>0?l.reduce((e,t)=>e+t,0)/l.length:0,i=f.calculateTotalProjectedPoints(r),c=f.getBenchPlayers(o.roster,r),p=f.calculateTotalProjectedPoints(c),d=f.analyzeLineup(r,{leagueType:t,scoring:"ppr"});return{teamId:e,teamName:o.teamName,draftSlot:o.draftSlot,roster:o.roster,optimalLineup:r,optimalLineupPoints:i,benchPlayers:c,benchPoints:p,totalProjectedPoints:i+p,averageAdpValue:s,averageVorpScore:n,lineupAnalysis:d}});return{draftInfo:d,analysis:{teams:g.calculatePositionGrades(h,{leagueType:t,scoring:"ppr"}).map(e=>{let t=h.find(t=>t.teamId===e.teamId);return{teamId:e.teamId,teamName:e.teamName,draftSlot:t?.draftSlot||0,optimalLineup:t?.optimalLineup||{},optimalLineupPoints:t?.optimalLineupPoints||0,benchPlayers:t?.benchPlayers||[],benchPoints:t?.benchPoints||0,positionGrades:e.positionGrades||{},overallGrade:e.overallGrade||{grade:"â€”",score:0},totalProjectedPoints:(t?.optimalLineupPoints||0)+(t?.benchPoints||0),averageProjectedPoints:t?.roster?.length?t.roster.reduce((e,t)=>e+(t.projectedPoints||0),0)/t.roster.length:0,averageAdpValue:t?.averageAdpValue||0,averageVorpScore:t?.averageVorpScore||0,players:t?.roster||[],roster:t?.roster||[]}})}}}constructor(){this.consolidatedData={},this.nameLookupIndex={},this.playerDetails={},this.vorpData={},this.adpData={}}}async function u(e){try{let{draftUrl:t,leagueType:o="standard"}=await e.json();if(!t)return n.NextResponse.json({success:!1,error:"Draft URL is required"});console.log("\uD83D\uDE80 Starting draft analysis..."),console.log("\uD83D\uDD0D Draft URL:",t),console.log("\uD83C\uDFC8 League Type:",o);let r=new d;await r.initialize();let a=await r.analyzeDraft(t,o);return n.NextResponse.json({success:!0,data:a})}catch(e){return console.error("âŒ Error in draft analysis:",e),n.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error occurred"})}}function f(){return new Response("Method Not Allowed",{status:405,headers:{Allow:"POST"}})}let g=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/analyze-draft/route",pathname:"/api/analyze-draft",filename:"route",bundlePath:"app/api/analyze-draft/route"},resolvedPagePath:"/Users/kanikameister/Documents/ff_api_skeleton/app/api/analyze-draft/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:D}=g,y="/api/analyze-draft/route";function P(){return(0,l.patchFetch)({serverHooks:D,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[276,972],()=>o(260));module.exports=r})();